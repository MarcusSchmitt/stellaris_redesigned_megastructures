# see README.txt for example

asteroidhub_0 = {
    entity = ""
    construction_entity = "orbital_habitat_entity"
    portrait = "GFX_megastructure_construction_background"
    place_entity_on_planet_plane = yes
    build_time = 1800
    build_cost = {
        energy = 5000
        influence = 150
    }
    construction_blocks_others = no

    potential = {
        has_ascension_perk = ap_voidborn
    }

    possible = {
        custom_tooltip = {
            fail_text = "requires_inside_border"
            is_inside_border = from
        }
    }

    placement_rules = {
        planet_possible = {
            custom_tooltip = {
                fail_text = "requires_no_anomaly"
                NOT = { has_anomaly = yes }
            }
            custom_tooltip = {
                fail_text = "requires_no_existing_megastructure"
                #can_build_megastructure_on_planet = yes
                NOR = {
                    has_planet_flag = megastructure
                    has_planet_flag = has_megastructure
                    solar_system = {
                        has_star_flag = ring_world_built
                    }
                    is_planet_class = pc_ringworld_habitable
                    is_planet_class = pc_ringworld_habitable_damaged
                    is_planet_class = pc_ringworld_tech
                    is_planet_class = pc_ringworld_tech_damaged
                    is_planet_class = pc_ringworld_seam
                    is_planet_class = pc_ringworld_seam_damaged
                }
            }
            custom_tooltip = {
                fail_text = "requires_no_orbital_station"
                has_orbital_station = no
            }
            custom_tooltip = {
                fail_text = "requires_survey_not_habitable"
                is_surveyed = {            # prevent leaking habitability information
                    who = prev.from
                    status = yes
                }
                colonizeable_planet = no    # prevent the spaceport colliding with the habitat
            }

             # balance for habitats
            custom_tooltip = {
                fail_text = "requires_asteroid"
                NOT = {is_asteroid = yes}
            }
        } # use these for all non-star megastructures
    }
    
    ai_weight = {
        factor = 5
    }
    
    on_build_start = {}
    on_build_cancel = {}
    
    on_build_complete = {
        remove_megastructure = fromfrom
        fromfrom.planet = {
            change_pc = pc_asteroid_hub
            change_planet_size = 5
            set_planet_flag = megastructure
            set_planet_flag = habitat
            while = {
                limit = {
                    any_tile = { has_blocker = yes }
                }
                random_tile = {
                    limit = { has_blocker = yes }
                    remove_blocker = yes
                }
            }
        }
    }
}
